<% /* Shared unauthenticated guard partial.
   Inputs:
     - idPrefix: base string for element IDs (e.g., 'profile', 'pl')
     - message: explanatory text placed above the button
     - buttonLabel: text for the auth button (default 'Log In / Sign Up')
     - containerId: explicit container id (optional; falls back to `${idPrefix}-auth-guard`)
*/ %>
<% const _idPref = (typeof idPrefix !== 'undefined' && idPrefix) ? idPrefix : 'auth'; %>
<% const _containerId = (typeof containerId !== 'undefined' && containerId) ? containerId : (_idPref + '-auth-guard'); %>
<% const _btnLabel = (typeof buttonLabel !== 'undefined' && buttonLabel) ? buttonLabel : 'Log In / Sign Up'; %>
<div id="<%- _containerId %>" class="auth-guard" aria-label="Login required" style="padding-top:var(--topbar-height);padding-bottom:var(--bottom-nav-height);min-height:50vh;display:flex;align-items:center;justify-content:center;flex-direction:column;gap:1rem;">
  <% if (message) { %><p class="auth-guard-msg" style="font-size:1rem;color:var(--color-text-dim);"><%- message %></p><% } %>
  <button id="<%- _idPref %>LoginLink" type="button" class="auth-btn" style="margin-top:.25rem;"><%- _btnLabel %></button>
</div>
<script>
// Shared auth guard wiring (idPrefix: <%- _idPref %>)
(function(){
  var onceKey = 'authGuardWired_'+ '<%- _idPref %>';
  if(window[onceKey]) return; window[onceKey]=true;
  function wire(){
    var link = document.getElementById('<%- _idPref %>LoginLink');
    var opener = document.getElementById('authOpenBtn');
    if(!link || !opener) return;
    link.addEventListener('click', function(e){ e.preventDefault(); opener.click(); }, { once:true });
  }
  if(document.readyState === 'loading') document.addEventListener('DOMContentLoaded', wire); else wire();
})();
</script>